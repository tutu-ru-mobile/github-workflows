name: "Get seconds from date"
description: "Get seconds from date"

inputs:
  from-date:
    description: "Date in format %Y-%m-%dT%H:%M:%S%z"
    required: true

outputs:
  hours-from-date:
    description: "Seconds from input.from-date"
    value: ${{ steps.calculations.outputs.hours-value }}
  minutes-from-date:
    description: "Seconds from input.from-date"
    value: ${{ steps.calculations.outputs.minutes-value }}
  seconds-from-date:
    description: "Seconds from input.from-date"
    value: ${{ steps.calculations.outputs.seconds-value }}

runs:
  using: "composite"
  steps:
    - id: calculations
      shell: bash
      run: |
          now_date=$(date +"%Y-%m-%dT%H:%M:%S%z")

          start=$(date -j -f "%Y-%m-%dT%H:%M:%S%z" "${{ inputs.from-date }}" +%s)
          end=$(date -j -f "%Y-%m-%dT%H:%M:%S%z" "${now_date}" +%s)
          runtime=$((end-start))

          hours=$((runtime / 3600))
          minutes=$(( (runtime % 3600) / 60))
          seconds=$((runtime % 60))

          echo "hours-value=${hours}" >> $GITHUB_OUTPUT
          echo "minutes-value=${minutes}" >> $GITHUB_OUTPUT
          echo "seconds-value=${seconds}" >> $GITHUB_OUTPUT

